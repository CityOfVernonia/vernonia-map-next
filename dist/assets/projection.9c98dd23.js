import{aq as r,f8 as e,mV as t,mW as o,mX as n,mY as a,fL as f,kY as y,k0 as s,g9 as c,lc as m,ga as u,mZ as i,fD as p,bX as T,g2 as A,gy as d,bh as l,kW as E,m_ as g}from"./vendor.9770a310.js";import{e as P,f as _,o as h}from"./vec33.fc83c3d5.js";const C=r.getLogger("esri.geometry.support.meshUtils.normalProjection");function F(r,e,t,o,n){return W(o)?(R(0,f.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n)),n):(C.error("Cannot convert spatial reference to PCPF"),n)}function V(r,e,t,o,n){return W(o)?(R(1,f.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n)),n):(C.error("Cannot convert to spatial reference from PCPF"),n)}function v(r,o,n){return e(r,o,0,n,t(o),0,r.length/3),n}function L(r,o,n){return e(r,t(n),0,o,n,0,r.length/3),o}function M(r,e,t){if(l(r))return e;const o=y.fromTypedArray(r),n=y.fromTypedArray(e);return P(n,o,t),e}function Y(r,e,t){if(l(r))return e;E(q,t);const o=f.fromTypedArray(r),n=f.fromTypedArray(e);return _(n,o,q),g(q)||h(n,n),e}function S(r,e,t){if(l(r))return e;E(q,t);const o=f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),n=f.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(_(n,o,q),g(q)||h(n,n),r!==e)for(let a=3;a<r.length;a+=4)e[a]=r[a];return e}function B(r,e,t,o,n){if(!W(o))return C.error("Cannot convert spatial reference to PCPF"),n;R(0,f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let a=3;a<r.length;a+=4)n[a]=r[a];return n}function N(r,e,t,o,n){if(!W(o))return C.error("Cannot convert to spatial reference from PCPF"),n;R(1,f.fromTypedArray(r,16),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n,16));for(let a=3;a<r.length;a+=4)n[a]=r[a];return n}function R(r,e,o,n,a,f){if(!e)return;const y=o.count,T=t(a);if(b(a))for(let t=0;t<y;t++)n.getVec(t,j),e.getVec(t,k),s(T,j,X,T),c(q,X),1===r&&m(q,q),u(k,k,q),f.setVec(t,k);else for(let t=0;t<y;t++){n.getVec(t,j),e.getVec(t,k),s(T,j,X,T),c(q,X);const a=i(o.get(t,1));let y=Math.cos(a);0===r&&(y=1/y),q[0]*=y,q[1]*=y,q[2]*=y,q[3]*=y,q[4]*=y,q[5]*=y,1===r&&m(q,q),u(k,k,q),p(k,k),f.setVec(t,k)}return f}function W(r){return b(r)||function(r){return r.isWebMercator}(r)}function b(r){return r.isWGS84||o(r)||n(r)||a(r)}const j=T(),k=T(),X=A(),q=d();export{B,F,S as L,L as M,N as R,M as V,V as _,Y as k,v};
