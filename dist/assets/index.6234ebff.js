var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,l=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&s(e,i,t[i]);if(a)for(var i of a(t))n.call(t,i)&&s(e,i,t[i]);return e},r=(e,a)=>t(e,i(a));import{p as c,s as d,G as p,a as h,y as u,n as w,x as g,b as v,j as y,M as m,c as b,d as f,e as _,m as O,f as S,h as x,u as M,g as k,L as U,i as C,k as T,l as I,o as E,q as A,r as D,P as L,t as P,v as R,w as V,z as N,C as j,A as H,B as $,D as F,E as z,F as q,S as G,H as B,I as W,J as X,K as Y,R as Z,N as Q,O as J,Q as K,T as ee,U as te,V as ie,W as ae,X as oe,Y as ne,Z as se,_ as le,$ as re,a0 as ce,a1 as de,a2 as pe}from"./vendor.c9efa5f2.js";var he=Object.defineProperty,ue=Object.getOwnPropertyDescriptor,we=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?ue(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&he(t,i,n),n};const ge="jsapiauthcred";let ve=class extends c{constructor(e){super(e),this.signedIn=!1}load(){const{portal:e,oAuthInfo:t}=this;return d.registerOAuthInfos([t]),d.oAuthViewModel=this,new Promise(((t,i)=>{e.loaded?d.checkSignInStatus(e.url).then((e=>{this._completeSignIn(e,t)})).catch((a=>{if("User is not signed in."===a.message){const i=localStorage.getItem(ge);if(i){const a=JSON.parse(i);if(!a.token)return localStorage.removeItem(ge),void t(!1);d.registerToken(a),d.checkSignInStatus(e.url).then((async e=>{this.portal=new p,await this.portal.load(),this._completeSignIn(e,t)})).catch((()=>{t(!1)}))}else t(!1)}else i(a)})):i(new h("OAuthViewModelLoadError","Portal instance must be loaded before loading OAuthViewModel instance."))}))}_completeSignIn(e,t){localStorage.setItem(ge,JSON.stringify(e.toJSON())),this.credential=e,this.signedIn=!0,t(!0),e.on("token-change",(()=>{localStorage.setItem(ge,JSON.stringify(this.credential.toJSON()))}))}signIn(){const e=this.signInUrl||`${this.portal.url}/sharing/rest`;d.oAuthSignIn(e,d.findServerInfo(e),this.oAuthInfo,{oAuthPopupConfirmation:!1,signal:(new AbortController).signal}).then((()=>{window.location.reload()})).catch((()=>{}))}signOut(){d.destroyCredentials(),localStorage.removeItem(ge),window.location.reload()}};we([u()],ve.prototype,"portal",2),we([u()],ve.prototype,"oAuthInfo",2),we([u()],ve.prototype,"signInUrl",2),we([u()],ve.prototype,"credential",2),we([u({aliasOf:"portal.user"})],ve.prototype,"user",2),we([u({aliasOf:"user.fullName"})],ve.prototype,"name",2),we([u({aliasOf:"user.username"})],ve.prototype,"username",2),we([u()],ve.prototype,"signedIn",2),ve=we([w("cov.viewModels.OAuthViewModel")],ve);var ye=Object.defineProperty,me=Object.getOwnPropertyDescriptor,be=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?me(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&ye(t,i,n),n};const fe="cov-loading-screen",_e="cov-loading-screen--info",Oe="cov-loading-screen--heart",Se="cov-loading-screen--coffee",xe="cov-loading-screen--built-with";let Me=class extends g{constructor(e){super(e),this.title="Vernonia",this.delay=4,this.fadeDelay=1,this._heart="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z",this._coffee="M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z",this.container=document.createElement("div"),document.body.append(this.container)}end(){const{delay:e,fadeDelay:t}=this;setTimeout((()=>{this.container.style.opacity="0"}),1e3*(e-t)),setTimeout((()=>{this.destroy()}),1e3*e)}render(){const{title:e,fadeDelay:t,_heart:i,_coffee:a}=this;return v("div",{class:fe,style:`transition: opacity ${t}s;`},v("div",{class:_e},v("p",null,"Loading ",e.replace("<br>"," ")),v("calcite-progress",{type:"indeterminate"}),v("p",null,"Copyright Â© ",(new Date).getFullYear()," City of Vernonia"),v("p",null,v("span",null,"Made with"),v("svg",{class:Oe,"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},v("path",{fill:"currentColor",d:i})),v("span",null,"and"),v("svg",{class:Se,"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},v("path",{fill:"currentColor",d:a})),v("span",null,"in Vernonia, Oregon"))),v("p",{class:xe},"Built with Esri's JavaScript API and Calcite"))}};be([u()],Me.prototype,"title",2),be([u()],Me.prototype,"delay",2),be([u()],Me.prototype,"fadeDelay",2),be([u()],Me.prototype,"_heart",2),be([u()],Me.prototype,"_coffee",2),Me=be([w("cov.widgets.LoadingScreen")],Me);var ke=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,Ce=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Ue(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&ke(t,i,n),n};let Te=0;const Ie="esri-widget__table",Ee="esri-feature__field-header",Ae="esri-feature__field-data";let De=class extends g{constructor(e){super(e),this.accessorValues=[]}postInitialize(){y(this,"graphic",this.getAccessorValues.bind(this))}getAccessorValues(){const{graphic:e,accessorValues:t}=this,{layer:i,attributes:a}=e,o=a[i.objectIdField];i.queryRelatedFeatures({outFields:["*"],relationshipId:0,objectIds:[o]}).then((e=>{const i=e[o].features;i.length&&i.forEach((e=>{const{attributes:i}=e;t.push(v("tr",{key:Te++},v("td",{class:Ae},v("strong",null,"Tax Account ",i.ACCOUNT_ID)),v("td",null,"Land / Improvement Values"))),t.push(v("tr",{key:Te++},v("th",{class:Ee},"Assessed Value"),v("td",{class:Ae},"$",i.AV_LAND.toLocaleString("en")," / $",i.AV_IMPR.toLocaleString("en")))),t.push(v("tr",{key:Te++},v("th",{class:Ee},"Real Market Value"),v("td",{class:Ae},"$",i.RMV_LAND.toLocaleString("en")," / $",i.RMV_IMPR.toLocaleString("en"))))})),this.scheduleRender()})).catch((e=>{console.log(e)}))}render(){const e=this.graphic.attributes;return e.BNDY_CLIPPED?v("p",null,"Note: This tax lot is clipped to the City of Vernonia area spatial extent. No tax lot data is provided here. Please visit the"," ",v("a",{href:"https://www.columbiacountyor.gov/departments/Assessor",target:"_blank",rel:"noopener"},"Columbia County Assessor's")," ","web site for tax lot information."):v("table",{class:Ie},v("tr",null,v("th",{class:Ee},"Tax Lot"),1===e.VERNONIA?v("td",{class:Ae},v("a",{href:`https://www.vernonia-or.gov/tax-lot/${e.TAXLOT_ID}/`,target:"_blank"},e.TAXLOT_ID)):v("td",{class:Ae},e.TAXLOT_ID)),v("tr",null,v("th",{class:Ee},"Tax Map"),v("td",{class:Ae},v("a",{href:`http://65.122.151.216/geomoose2/taxlots_map_images/${e.TAXMAP}`,target:"_blank",rel:"noopener"},`${e.TOWN}${e.TOWN_DIR}${e.RANGE}${e.RANGE_DIR} ${e.SECTION} ${e.QTR}${e.QTR_QTR}`))),v("tr",null,v("th",{class:Ee},"Owner"),v("td",{class:Ae},e.OWNER)),e.ADDRESS?v("tr",null,v("th",{class:Ee},"Address (Primary Situs)"),v("td",{class:Ae},v("a",{href:`https://www.google.com/maps/place/${e.ADDRESS.split(" ").join("+")}+${e.CITY}=${e.STATE}+${e.ZIP}/data=!3m1!1e3`,target:"_blank",rel:"noopener"},e.ADDRESS))):null,v("tr",null,v("th",{class:Ee},"Area"),v("td",{class:Ae},v("span",{style:"margin-right:0.75rem;"},`${e.ACRES} acres`),v("span",null,`${e.SQ_FEET.toLocaleString()} sq ft`))),v("tr",null,v("th",{class:Ee},"Tax Account(s)"),v("td",{class:Ae},e.ACCOUNT_IDS.split(",").map((e=>v("a",{style:"margin-right:0.75rem;",href:`http://www.helioncentral.com/columbiaat/MainQueryDetails.aspx?AccountID=${e}&QueryYear=2021&Roll=R`,target:"_blank",rel:"noopener"},e))))),this.accessorValues)}};Ce([u()],De.prototype,"graphic",2),Ce([u()],De.prototype,"accessorValues",2),De=Ce([w("cov.popups.TaxLotPopup.Content")],De);let Le=class extends m{constructor(){super(...arguments),this.title="{TAXLOT_ID}",this.outFields=["*"],this.customContent=new b({outFields:["*"],creator:e=>new De({graphic:e.graphic})}),this.content=[this.customContent]}};Ce([u()],Le.prototype,"title",2),Ce([u()],Le.prototype,"outFields",2),Ce([u()],Le.prototype,"customContent",2),Ce([u()],Le.prototype,"content",2),Le=Ce([w("cov.popups.TaxLotPopup")],Le);var Pe=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,Ve=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Re(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&Pe(t,i,n),n};let Ne=class extends g{constructor(e){super(e),this.theme="light",this.scale="s",this.includeHome=!0,this.includeCompass=!0,this.includeLocate=!0,this.includeFullscreen=!0,y(this,"view",this._init.bind(this))}_init(e){const{includeHome:t,includeLocate:i,includeFullscreen:a,fullscreenElement:o}=this;this.zoom=new f({view:e}),t&&(this.home=new _({view:e})),i&&(this.locate=new O({view:e})),a&&(this.fullscreen=new S({view:e,element:o}))}render(){const{view:e,theme:t,scale:i,zoom:a,home:o,includeCompass:n,locate:s,fullscreen:l,markupViewModel:r}=this,c="ready"===s.state?"gps-on":"locating"===s.state?"gps-on-f":"disabled"===s.state?"gps-off":"",d="active"===l.state,p=d?"Exit Fullscreen":"Enter Fullscreen";return v("div",null,v("calcite-action-pad",{theme:t,"expand-disabled":""},v("calcite-action-group",null,v("calcite-action",{text:"Zoom In",title:"Zoom In",icon:"plus",scale:i,disabled:!a.canZoomIn,onclick:a.zoomIn.bind(a)}),o?v("calcite-action",{text:"Default Extent",title:"Default Extent",icon:"home",scale:i,onclick:o.go.bind(o)}):null,v("calcite-action",{text:"Zoom Out",title:"Zoom Out",icon:"minus",scale:i,disabled:!a.canZoomOut,onclick:a.zoomOut.bind(a)})),n&&e.constraints.rotationEnabled||s||l?v("calcite-action-group",null,n&&e.constraints.rotationEnabled?v("calcite-action",{text:"Reset Orientation",title:"Reset Orientation",icon:"compass-needle",scale:i,afterCreate:this._compassRotation.bind(this),onclick:()=>e.rotation=0}):null,s?v("calcite-action",{text:"Zoom To Location",title:"Zoom To Location",icon:c,scale:i,disabled:"disabled"===s.state,onclick:s.locate.bind(s)}):null,l&&"feature-unsupported"!==l.state?v("calcite-action",{title:p,text:p,disabled:"disabled"===l.state,scale:i,icon:d?"full-screen-exit":"extent",onclick:l.toggle.bind(l)}):null):null,r?v("calcite-action-group",null,v("calcite-action",{text:"Draw Point",title:"Draw Point",icon:"point",scale:i,onclick:()=>r.markup("point")}),v("calcite-action",{text:"Draw Polyline",title:"Draw Polyline",icon:"line",scale:i,onclick:()=>r.markup("polyline")}),v("calcite-action",{text:"Draw Polygon",title:"Draw Polygon",icon:"polygon-vertices",scale:i,onclick:()=>r.markup("polygon")}),v("calcite-action-menu",null,v("calcite-action",{slot:"trigger",style:"margin: 0;",icon:"ellipsis",scale:i}),v("calcite-action",{text:"Draw Rectangle",title:"Draw Rectangle","text-enabled":"",icon:"rectangle",scale:i,onclick:()=>r.markup("rectangle")}),v("calcite-action",{text:"Draw Circle",title:"Draw Circle","text-enabled":"",icon:"circle",scale:i,onclick:()=>r.markup("circle")}),v("calcite-action",{text:"Snapping Options",title:"Snapping Options","text-enabled":"",icon:"gear",scale:i,onclick:()=>r.showSnappingOptionsModal()}))):null))}_compassRotation(e){const{view:t}=this;let i;e.shadowRoot?(i=e.shadowRoot.querySelector(".icon-container"),i?this.watch("view.rotation",(()=>{i.style.transform=`rotate(${t.rotation}deg)`})):setTimeout((()=>{this._compassRotation(e)}),100)):setTimeout((()=>{this._compassRotation(e)}),100)}};Ve([u()],Ne.prototype,"view",2),Ve([u()],Ne.prototype,"theme",2),Ve([u()],Ne.prototype,"scale",2),Ve([u()],Ne.prototype,"includeHome",2),Ve([u()],Ne.prototype,"includeCompass",2),Ve([u()],Ne.prototype,"includeLocate",2),Ve([u()],Ne.prototype,"includeFullscreen",2),Ve([u()],Ne.prototype,"fullscreenElement",2),Ve([u()],Ne.prototype,"markupViewModel",2),Ve([u()],Ne.prototype,"zoom",2),Ve([u()],Ne.prototype,"home",2),Ve([u()],Ne.prototype,"locate",2),Ve([u()],Ne.prototype,"fullscreen",2),Ne=Ve([w("cov.widgets.ViewControl")],Ne);var je=Object.defineProperty,He=Object.getOwnPropertyDescriptor,$e=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?He(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&je(t,i,n),n};const Fe="cov-widget-switcher",ze="cov-widget-switcher--container",qe="cov-widget-switcher--widget",Ge="cov-widget-switcher--pad";let Be=0,We=class extends g{constructor(e){super(e),this.widgets=[],this.theme="light",this.scale="s",this._activeWidgetId=null,this._actions=[],this._widgets={}}postInitialize(){const{id:e,widgets:t,scale:i,_actions:a,_widgets:o}=this;t.length||this.destroy(),t.forEach((t=>{const{text:n,icon:s,widget:l}=t,r=`${e}_widget_${l.id}`,c=v("calcite-action",{key:Be++,text:n,title:n,icon:s,scale:i,onclick:this._switch.bind(this,r)});a.push(c);const d=l.container=document.createElement("div");d.classList.add(qe),o[r]={widget:l,action:c,icon:s,container:d}}))}_switch(e){const{_activeWidgetId:t,_container:i,_widgets:a}=this,{widget:o,action:n,icon:s,container:l}=a[e];if(t)if(t===e)i.removeChild(l),o.onHide&&"function"==typeof o.onHide&&o.onHide(),n.domNode.setAttribute("icon",s),this._activeWidgetId=null;else{const s=a[t];o.onShow&&"function"==typeof o.onShow&&o.onShow(),s.widget.onHide&&"function"==typeof s.widget.onHide&&s.widget.onHide(),s.action.domNode.setAttribute("icon",s.icon),n.domNode.setAttribute("icon","chevron-right"),i.removeChild(i.firstChild),i.append(l),this._activeWidgetId=e}else i.append(l),o.onShow&&"function"==typeof o.onShow&&o.onShow(),n.domNode.setAttribute("icon","chevron-right"),this._activeWidgetId=e;this.scheduleRender()}render(){const{theme:e,_actions:t}=this;return v("div",{class:Fe},v("div",{class:ze,bind:this,afterCreate:e=>{this._container=e}}),v("div",{class:Ge},v("calcite-action-pad",{theme:e,"expand-disabled":""},t)))}};$e([u()],We.prototype,"widgets",2),$e([u()],We.prototype,"theme",2),$e([u()],We.prototype,"scale",2),$e([u()],We.prototype,"_activeWidgetId",2),$e([u()],We.prototype,"_container",2),$e([u()],We.prototype,"_actions",2),$e([u()],We.prototype,"_widgets",2),We=$e([w("cov.widgets.WidgetSwitcher")],We);var Xe=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor,Ze=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Ye(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&Xe(t,i,n),n};const Qe="cov-viewer",Je="cov-viewer--ui-title",Ke="cov-viewer--header",et="cov-viewer--header-title",tt="cov-viewer--header-search",it="cov-viewer--header-user",at="cov-viewer--header-user_menu",ot="cov-viewer--header-user_menu--close",nt="cov-viewer--header-user_menu--visible",st="cov-viewer--view";let lt=class extends g{constructor(e){super(e),this.includeHeader=!0,this.title="Pebble Creek Road",this.includeSearch=!0,this.widgets=[],this.container=document.createElement("div"),this._userMenuVisible=!1,document.body.append(this.container)}async postInitialize(){const{view:e,includeHeader:t,title:i,includeSearch:a,searchViewModel:o,nextBasemap:n,markupViewModel:s,widgets:l,container:r}=this;if(await setTimeout((()=>0),0),e.container=document.querySelector("div[data-viewer-view-container]"),await e.when(),e.ui.empty("top-left"),!t){const t=document.createElement("div");t.classList.add(Je),t.innerHTML=i,e.ui.add(t,"top-left")}if(e.ui.add(new Ne({view:e,fullscreenElement:r,markupViewModel:s}),"top-left"),e.ui.add(new x({view:e,style:"ruler"}),"bottom-left"),l.length&&e.ui.add(new We({widgets:l}),"top-right"),n&&e.ui.add(new M({view:e,nextBasemap:n}),"bottom-right"),t&&a){const t=new k;o?(o.view=e,t.viewModel=o):t.view=e,t.container=document.querySelector("div[data-viewer-search-container]")}}render(){const{includeHeader:e,title:t,oAuthViewModel:i}=this;return v("div",{class:Qe},e?v("div",{class:Ke},v("div",{class:et},t),v("div",{class:tt,"data-viewer-search-container":""}),v("div",{class:it},i?this._renderUser():null)):null,v("div",{class:st,"data-viewer-view-container":""}))}_renderUser(){const{oAuthViewModel:e,_userMenuVisible:t}=this;return e.signedIn?v("div",null,v("calcite-avatar",{scale:"s",username:e.username,"full-name":e.name,thumbnail:e.user&&e.user.thumbnailUrl?e.user.thumbnailUrl:"",title:`Signed in as ${e.name}`,onclick:()=>{this._userMenuVisible=!this._userMenuVisible}}),v("div",{class:this.classes(at,t?nt:"")},v("div",null,v("calcite-avatar",{scale:"l",username:e.username,"full-name":e.name,thumbnail:e.user&&e.user.thumbnailUrl?e.user.thumbnailUrl:""})),v("div",null,e.name),v("div",null,e.username),v("div",null,v("calcite-link",{href:`${e.portal.url}/home/content.html`,target:"_blank"},"My Content")),v("div",null,v("calcite-link",{href:`${e.portal.url}/home/user.html`,target:"_blank"},"My Profile")),v("calcite-button",{scale:"s",width:"full",onclick:e.signOut.bind(e)},"Sign Out"),v("calcite-action",{class:ot,scale:"s",appearance:"clear",icon:"x",onclick:()=>{this._userMenuVisible=!1}}))):v("calcite-button",{scale:"s",round:"",appearance:"transparent",color:"inverse",title:"Sign In",onclick:e.signIn.bind(e)},"Sign In")}};Ze([u()],lt.prototype,"view",2),Ze([u()],lt.prototype,"includeHeader",2),Ze([u()],lt.prototype,"title",2),Ze([u()],lt.prototype,"includeSearch",2),Ze([u()],lt.prototype,"searchViewModel",2),Ze([u()],lt.prototype,"markupViewModel",2),Ze([u()],lt.prototype,"oAuthViewModel",2),Ze([u()],lt.prototype,"nextBasemap",2),Ze([u()],lt.prototype,"widgets",2),Ze([u()],lt.prototype,"container",2),Ze([u()],lt.prototype,"_userMenuVisible",2),lt=Ze([w("cov.Viewer")],lt);var rt=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,dt=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?ct(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&rt(t,i,n),n};const pt="cov-snapping-options-modal--toggles";let ht=0,ut=class extends g{constructor(e){super(e),this.container=document.createElement("div"),this._active=!1,this._layerSnappingToggles=new U,document.body.append(this.container),y(this,"featureSources",this._renderLayerSnapping.bind(this))}show(){this._active=!0}render(){const{_active:e,_layerSnappingToggles:t}=this;return v("div",null,v("calcite-modal",{scale:"s",width:"s",active:e},v("h3",{slot:"header"},"Snapping Options"),v("div",{slot:"content"},v("div",{class:pt},t.toArray().map((e=>e.element)))),v("calcite-button",{slot:"primary",scale:"s",onclick:()=>{this._active=!1}},"Done")))}_renderLayerSnapping(e){const{_layerSnappingToggles:t}=this;e.forEach((e=>{const{layer:i,enabled:a}=e;i.title&&t.add({element:v("calcite-label",{key:ht++,scale:"s",layout:"inline"},v("calcite-switch",{scale:"s",switched:a,bind:this,afterCreate:t=>{this._switchEvents(t,e)}}),i.title)})}))}_switchEvents(e,t){e.addEventListener("calciteSwitchChange",(e=>t.enabled=e.detail.switched)),C(t,"enabled",(t=>e.switched=t))}};dt([u()],ut.prototype,"snappingOptions",2),dt([u({aliasOf:"snappingOptions.featureSources"})],ut.prototype,"featureSources",2),dt([u()],ut.prototype,"container",2),dt([u()],ut.prototype,"_active",2),dt([u()],ut.prototype,"_layerSnappingToggles",2),ut=dt([w("cov.widgets.SnappingOptionsModal")],ut);var wt=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,vt=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?gt(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&wt(t,i,n),n};const yt=(new Date).getTime().toString(16),mt={delete:`${yt}-delete-action`,update:`${yt}-update-action`,up:`${yt}-up-action`,down:`${yt}-down-action`},bt=[{type:"button",title:"Delete",id:mt.delete,className:"esri-icon-trash"},{type:"button",title:"Edit",id:mt.update,className:"esri-icon-edit"},{type:"button",title:"Up",id:mt.up,className:"esri-icon-up"},{type:"button",title:"Down",id:mt.down,className:"esri-icon-down"}];let ft=class extends T{constructor(e){super(e),this.layer=new I({listMode:"hide"}),this.point=new I({listMode:"hide",title:"Markup Points"}),this.polyline=new I({listMode:"hide",title:"Markup Polylines"}),this.polygon=new I({listMode:"hide",title:"Markup Polygons"}),this.layers=new E({listMode:"hide"}),this.snappingOptions=new A({enabled:!0,featureEnabled:!0}),this.snappingOptionsModal=new ut,y(this,"view",this._init.bind(this))}showSnappingOptionsModal(){this.snappingOptionsModal.show()}markup(e){const{view:t}=this;t.popup.close(),this.create(e)}_init(e){const{map:t}=e,{layer:i,point:a,polyline:o,polygon:n,layers:s,snappingOptions:l}=this;s.addMany([n,o,a,i]),t.add(s),this.on("create",this._markupCreateEvent.bind(this)),this.on("update",this._markupUpdateEvent.bind(this)),e.popup.on("trigger-action",(e=>{switch(e.action.id){case mt.delete:this._deleteMarkupGraphic();break;case mt.update:this._editMarkupGraphic();break;case mt.up:this._moveMarkupGraphicUp();break;case mt.down:this._moveMarkupGraphicDown()}})),e.when((()=>{t.allLayers.forEach((e=>{const{type:t}=e;"feature"!==t&&"graphics"!==t&&"geojson"!==t&&"csv"!==t||l.featureSources.add(new D({layer:e}))})),this.snappingOptionsModal.snappingOptions=l}))}_isMarkup(e){const{layer:t}=e,{point:i,polyline:a,polygon:o}=this;return t===i||t===a||t===o}_markupCreateEvent(e){const{state:t,graphic:i}=e;if("cancel"===t||!i)return;const a=i.geometry.type;"complete"===t&&(i.symbol=this[`${a}Symbol`],i.popupTemplate=new m({title:`Markup ${a}`,content:"Symbol editor goes here.",actions:bt}),this[a].add(i))}_markupUpdateEvent(e){const{state:t,graphics:i}=e,{layer:a}=this,o=i[0],n=o.geometry.type;"complete"===t&&(a.removeAll(),this[n].add(o))}_deleteMarkupGraphic(e){const{view:{popup:t}}=this;(e=e||t.selectedFeature)&&this._isMarkup(e)&&(t.close(),e.layer.remove(e))}_editMarkupGraphic(e){const{view:{popup:t},layer:i}=this;(e=e||t.selectedFeature)&&this._isMarkup(e)&&(t.close(),e.layer.remove(e),i.add(e),this.update(e))}_moveMarkupGraphicUp(e){const{view:{popup:t}}=this;if(!(e=e||t.selectedFeature)||!this._isMarkup(e))return;const i=e.get("layer.graphics"),a=i.indexOf(e);a<i.length-1&&i.reorder(e,a+1)}_moveMarkupGraphicDown(e){const{view:{popup:t}}=this;if(!(e=e||t.selectedFeature)||!this._isMarkup(e))return;const i=e.get("layer.graphics"),a=i.indexOf(e);a>0&&i.reorder(e,a-1)}};vt([u()],ft.prototype,"layer",2),vt([u()],ft.prototype,"point",2),vt([u()],ft.prototype,"polyline",2),vt([u()],ft.prototype,"polygon",2),vt([u()],ft.prototype,"layers",2),vt([u()],ft.prototype,"snappingOptions",2),vt([u()],ft.prototype,"snappingOptionsModal",2),ft=vt([w("cov.viewModels.MarkupViewModel")],ft);var _t=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,St=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Ot(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&_t(t,i,n),n};const xt="cov-layer-list-legend";let Mt=class extends g{constructor(e){super(e)}render(){return v("div",{class:xt},v("calcite-tabs",{layout:"center"},v("calcite-tab-nav",{slot:"tab-nav"},v("calcite-tab-title",{active:""},"Layers"),v("calcite-tab-title",null,"Legend")),v("calcite-tab",{active:""},v("div",{bind:this,afterCreate:e=>{const{view:t}=this;new L({view:t,container:e})}})),v("calcite-tab",null,v("div",{bind:this,afterCreate:e=>{const{view:t}=this;new P({view:t,container:e})}}))))}};St([u()],Mt.prototype,"view",2),Mt=St([w("cov.widgets.LayerListLegend")],Mt);var kt=Object.defineProperty,Ut=Object.getOwnPropertyDescriptor,Ct=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Ut(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&kt(t,i,n),n};let Tt=0,It=class extends c{constructor(e){super(e),this.selectClass="esri-select",this.locationUnit="dec",this.locationUnits={dec:"Decimal Degrees",dms:"Degrees Minutes Seconds"},this.lengthUnit="feet",this.lengthUnits={meters:"Meters",feet:"Feet",kilometers:"Kilometers",miles:"Miles","nautical-miles":"Nautical Miles",yards:"Yards"},this.areaUnit="acres",this.areaUnits={acres:"Acres",ares:"Ares",hectares:"Hectacres","square-feet":"Square Feet","square-meters":"Square Meters","square-yards":"Square Yards","square-kilometers":"Square Kilometers","square-miles":"Square Miles"},this.elevationUnit="feet",this.elevationUnits={feet:"Feet",meters:"Meters"}}locationSelect(e,t){return v("select",{class:this.selectClass,name:e||"",title:t||"",bind:this,onchange:e=>{this.locationUnit=e.target.value}},this._createUnitOptions(this.locationUnits,this.locationUnit))}lengthSelect(e,t){return v("select",{class:this.selectClass,name:e||"",title:t||"",bind:this,onchange:e=>{this.lengthUnit=e.target.value}},this._createUnitOptions(this.lengthUnits,this.lengthUnit.toString()))}areaSelect(e,t){return v("select",{class:this.selectClass,name:e||"",title:t||"",bind:this,onchange:e=>{this.areaUnit=e.target.value}},this._createUnitOptions(this.areaUnits,this.areaUnit.toString()))}elevationSelect(e,t){return v("select",{class:this.selectClass,name:e||"",title:t||"",bind:this,onchange:e=>{this.elevationUnit=e.target.value}},this._createUnitOptions(this.elevationUnits,this.elevationUnit))}_createUnitOptions(e,t){const i=[];for(const a in e)i.push(v("option",{key:Tt++,value:a,selected:a===t},e[a]));return i}};Ct([u()],It.prototype,"selectClass",2),Ct([u()],It.prototype,"locationUnit",2),Ct([u()],It.prototype,"locationUnits",2),Ct([u()],It.prototype,"lengthUnit",2),Ct([u()],It.prototype,"lengthUnits",2),Ct([u()],It.prototype,"areaUnit",2),Ct([u()],It.prototype,"areaUnits",2),Ct([u()],It.prototype,"elevationUnit",2),Ct([u()],It.prototype,"elevationUnits",2),It=Ct([w("cov.viewModels.UnitsViewModel")],It);const Et=(e,t)=>{const{x:i,y:a}=e,{x:o,y:n}=t;return Math.sqrt(Math.pow(Math.abs(i-o),2)+Math.pow(Math.abs(a-n),2))},At=(e,t,i)=>{const{x:a,y:o,spatialReference:n}=e,{x:s,y:l}=t,r=Et(e,t)/i;return new R({x:a+(s-a)/r,y:o+(l-o)/r,spatialReference:n})};var Dt=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor,Pt=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Lt(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&Dt(t,i,n),n};let Rt=class extends c{constructor(e){super(e),this.showText=!0,this.color=[244,124,60],this.fillColor=[244,124,60,.15],this.hasGround=!1,this.state={action:"ready",length:0,area:0,x:0,y:0,z:0},this.sketchViewModel=new T({snappingOptions:new A({enabled:!0})}),this.units=new It,this.draw=new V,this.layer=new I({listMode:"hide"}),y(this,"view",this._init.bind(this))}clear(){const{view:e,draw:t,layer:i,_coordCenterHandle:a,_coordFormatHandle:o,_elevCenterHandle:n,_elevFormatHandle:s}=this;a.resume(),o.resume(),this._setLocation(e.center),n&&s&&(n.resume(),s.resume(),this._setElevation(e.center)),t.reset(),i.removeAll(),this.state=r(l({},this.state),{action:"ready",length:0,area:0})}length(){const{view:e,view:{spatialReference:t},draw:i}=this;this.clear(),this.state.action="measuringLength";const a=i.create("polyline",{mode:"click"});e.focus(),a.on(["vertex-add","cursor-update","vertex-remove","draw-complete"],(e=>{const i=new N({paths:e.vertices,spatialReference:t});"draw-complete"===e.type&&(this.state.action="length"),this._length(i)}))}_length(e){const{layer:t,_color:i,units:{lengthUnit:a},showText:o}=this;t.removeAll();let n=j(e,a);if(n<0){const t=H(e);t&&(n=j(t,a))}n=Number(n.toFixed(2)),this.state=r(l({},this.state),{length:n}),t.addMany([new $({geometry:e,symbol:new F({cap:"butt",join:"round",color:i,width:3})}),new $({geometry:e,symbol:new F({style:"dash",cap:"butt",join:"round",color:"white",width:1.5})})]),e.paths[0].forEach(this._addMarker.bind(this)),o&&this._addText((e=>{const{paths:[t],spatialReference:i}=e,a=t.map((e=>{const[t,i]=e;return{x:t,y:i}}));let o=0,n=0;for(let s=0;s<a.length-1;s+=1)o+=Et(new R(l({},a[s])),new R(l({},a[s+1])));for(let s=0;s<a.length-1;s+=1){if(n+Et(new R(l({},a[s])),new R(l({},a[s+1])))>o/2){const e=o/2-n;return At(new R(r(l({},a[s]),{spatialReference:i})),new R(r(l({},a[s+1]),{spatialReference:i})),e)}n+=Et(new R(l({},a[s])),new R(l({},a[s+1])))}return new R(r(l({},a[0]),{spatialReference:i}))})(e),`${this.state.length.toLocaleString()} ${a}`)}area(){const{view:e,view:{spatialReference:t},draw:i}=this;this.clear(),this.state.action="measuringArea";const a=i.create("polygon",{mode:"click"});e.focus(),a.on(["vertex-add","cursor-update","vertex-remove","draw-complete"],(e=>{const i=new z({rings:e.vertices,spatialReference:t});"draw-complete"===e.type&&(this.state.action="area"),this._area(i)}))}_area(e){const{layer:t,_color:i,_fillColor:a,units:{lengthUnit:o,areaUnit:n},showText:s}=this;t.removeAll();let c=q(e,n);if(c<0){const t=H(e);t&&(c=q(t,n))}const d=j(e,o);this.state=r(l({},this.state),{length:d,area:c}),t.addMany([new $({geometry:e,symbol:new G({color:a,outline:{cap:"butt",join:"round",color:i,width:3}})}),new $({geometry:e,symbol:new G({color:[0,0,0,0],outline:{style:"dash",cap:"butt",join:"round",color:"white",width:1.5}})})]),e.rings[0].forEach(this._addMarker.bind(this)),s&&this._addText(e.centroid,`${this.state.area.toLocaleString()} ${n}`)}location(){const{view:e,view:{spatialReference:t},sketchViewModel:i,draw:a,_coordCenterHandle:o,_coordFormatHandle:n}=this;this.clear(),o.pause(),n.pause(),this.state.action="queryingLocation";const s=a.create("point",{});e.focus(),s.on(["cursor-update","draw-complete"],(e=>{const[i,a]=e.coordinates,o=new R({x:i,y:a,spatialReference:t});"draw-complete"===e.type&&(this.state.action="location"),this._setLocation(o),this._location(o)}))}_location(e){const{layer:t,showText:i}=this,{x:a,y:o}=e;t.removeAll(),this._addMarker([a,o]),i&&this._addText(e,`${this.state.x} ${this.state.y}`)}elevation(){const{view:e,view:{spatialReference:t},hasGround:i,draw:a,_elevCenterHandle:o,_elevFormatHandle:n}=this;if(!i)return;this.clear(),o.pause(),n.pause(),this.state.action="queryingElevation";const s=a.create("point",{});e.focus(),s.on(["cursor-update","draw-complete"],(e=>{const[i,a]=e.coordinates,o=new R({x:i,y:a,spatialReference:t});"draw-complete"===e.type&&(this.state.action="elevation"),this._setElevation(o),this._elevation(o)}))}_elevation(e){const{units:{elevationUnit:t},layer:i,showText:a}=this,{x:o,y:n}=e;i.removeAll(),this._addMarker([o,n]),a&&this._addText(e,`${this.state.z.toLocaleString()} ${t}`)}_init(e){const{map:t}=e,{sketchViewModel:i,sketchViewModel:{snappingOptions:a},draw:o,color:n,fillColor:s,layer:l,units:r}=this;i.view=e,t.allLayers.forEach((e=>{const{type:t}=e;"feature"!==t&&"graphics"!==t&&"geojson"!==t&&"csv"!==t||a.featureSources.add(new D({layer:e}))})),o.view=e,e.map.add(l),this._color=new B(n),this._fillColor=new B(s),W(),this._setLocation(e.center),this._coordCenterHandle=X(e,"center",this._setLocation.bind(this)),this._coordFormatHandle=X(r,"locationUnit",this._setLocation.bind(this,e.center)),e.map.ground.layers.length?this._initElevation(e,r):C(e,"map.ground.layers.length",this._initElevation.bind(this,e,r)),C(r,["lengthUnit","areaUnit","locationUnit","elevationUnit"],((e,t,i)=>{const{state:{action:a},layer:{graphics:o}}=this;let n;switch(i){case"lengthUnit":if("length"!==a&&"measuringLength"!==a)break;n=o.find((e=>"polyline"===e.geometry.type)),this._length(n.geometry);break;case"areaUnit":if("area"!==a&&"measuringArea"!==a)break;n=o.find((e=>"polygon"===e.geometry.type)),this._area(n.geometry);break;case"locationUnit":if("location"!==a&&"queryingLocation"!==a)break;n=o.find((e=>"point"===e.geometry.type)),this._location(n.geometry);break;case"elevationUnit":if("elevation"!==a&&"queryingElevation"!==a)break;n=o.find((e=>"point"===e.geometry.type)),this._elevation(n.geometry)}}))}_initElevation(e,t){this.hasGround=!0,this.ground=e.map.ground,this._setElevation(e.center),this._elevCenterHandle=X(e,"center",this._setElevation.bind(this)),this._elevFormatHandle=X(t,"elevationUnit",this._setElevation.bind(this,e.center))}_setLocation(e){const{units:t}=this;if("dec"===t.locationUnit)this.state=r(l({},this.state),{y:Number(e.latitude.toFixed(6)),x:Number(e.longitude.toFixed(6))});else{const t=Y(Z(e),"dms",2),i=-1!==t.indexOf("N")?t.indexOf("N"):t.indexOf("S");this.state=r(l({},this.state),{y:t.substring(0,i+1),x:t.substring(i+2,t.length)})}}_setElevation(e){const{units:t}=this;this.ground.queryElevation(e).then((e=>{const i=Number((e.geometry.z*("feet"===t.elevationUnit?3.2808399:1)).toFixed(2));this.state=r(l({},this.state),{z:i})})).catch((()=>{this.state=r(l({},this.state),{z:-99999})}))}_addMarker(e){const{view:{spatialReference:t},layer:i,_color:a}=this,[o,n]=e,s=new $({geometry:new R({x:o,y:n,spatialReference:t}),symbol:new Q({style:"x",size:8,outline:{color:a,width:2}})});i.add(s)}_addText(e,t){const{layer:i,_color:a}=this;i.add(new $({geometry:e,symbol:new J({text:t,color:a,haloColor:"white",haloSize:1.5,yoffset:10,font:{size:10,weight:"bold"}})}))}};Pt([u()],Rt.prototype,"view",2),Pt([u()],Rt.prototype,"showText",2),Pt([u()],Rt.prototype,"color",2),Pt([u()],Rt.prototype,"fillColor",2),Pt([u()],Rt.prototype,"hasGround",2),Pt([u()],Rt.prototype,"state",2),Pt([u({type:T})],Rt.prototype,"sketchViewModel",2),Pt([u({type:It})],Rt.prototype,"units",2),Pt([u()],Rt.prototype,"draw",2),Pt([u()],Rt.prototype,"ground",2),Pt([u()],Rt.prototype,"layer",2),Pt([u()],Rt.prototype,"_coordCenterHandle",2),Pt([u()],Rt.prototype,"_coordFormatHandle",2),Pt([u()],Rt.prototype,"_elevCenterHandle",2),Pt([u()],Rt.prototype,"_elevFormatHandle",2),Pt([u()],Rt.prototype,"_color",2),Pt([u()],Rt.prototype,"_fillColor",2),Rt=Pt([w("cov.viewModels.MeasureViewModel")],Rt);var Vt=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,jt=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Nt(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&Vt(t,i,n),n};const Ht="cov-measure",$t="cov-measure--row",Ft="cov-measure--result",zt="cov-measure--clear",qt="cov-measure--clear-visible";let Gt=0,Bt=class extends g{constructor(e){super(e),this.viewModel=new Rt}clear(){this.viewModel.clear()}length(){this.viewModel.length()}area(){this.viewModel.area()}elevation(){this.viewModel.elevation()}location(){this.viewModel.location()}_showTextHandle(e){e.addEventListener("calciteSwitchChange",(e=>{this.showText=e.detail.switched}))}_unitChangeHandle(e,t){t.addEventListener("calciteSelectChange",(t=>{const i=t.target.selectedOption.value;switch(e){case"length":this.units.lengthUnit=i;break;case"area":this.units.areaUnit=i;break;case"location":this.units.locationUnit=i;break;case"elevation":this.units.elevationUnit=i}}))}render(){const{state:e,hasGround:t,showText:i,units:{lengthUnits:a,lengthUnit:o,areaUnits:n,areaUnit:s,locationUnits:l,locationUnit:r,elevationUnits:c,elevationUnit:d}}=this,p={[qt]:"measuringLength"===e.action||"length"===e.action||"measuringArea"===e.action||"area"===e.action},h={[qt]:"queryingLocation"===e.action||"location"===e.action},u={[qt]:"queryingElevation"===e.action||"elevation"===e.action};return v("div",{class:Ht},v("calcite-tabs",{layout:"center"},v("calcite-tab-nav",{slot:"tab-nav"},v("calcite-tab-title",{active:""},"Measure"),v("calcite-tab-title",null,"Location"),v("calcite-tab-title",{style:t?"":"display:none;"},"Elevation")),v("calcite-tab",{active:""},v("div",{class:$t},v("calcite-button",{title:"Measure length",scale:"s",onclick:this.length.bind(this)},"Length"),v("calcite-select",{title:"Select length unit",scale:"s",afterCreate:this._unitChangeHandle.bind(this,"length")},this._createUnitOptions(a,o))),v("div",{class:$t},v("calcite-button",{title:"Measure area",scale:"s",onclick:this.area.bind(this)},"Area"),v("calcite-select",{title:"Select area unit",scale:"s",afterCreate:this._unitChangeHandle.bind(this,"area")},this._createUnitOptions(n,s))),v("div",{class:$t},v("label",null,v("calcite-switch",{title:"Show text while measuring",switched:i,scale:"m",afterCreate:this._showTextHandle.bind(this)}),"Show text")),this._createMeasureResult(),v("div",{class:this.classes(zt,p)},v("calcite-button",{title:"Clear",scale:"s",onclick:this.clear.bind(this)},"Clear"))),v("calcite-tab",null,v("div",{class:$t},v("calcite-button",{title:"Identify location",scale:"s",onclick:this.location.bind(this)},"Location"),v("calcite-select",{title:"Select location unit",scale:"s",afterCreate:this._unitChangeHandle.bind(this,"location")},this._createUnitOptions(l,r))),v("div",{class:$t},v("label",null,v("calcite-switch",{title:"Show text while measuring",switched:i,scale:"m",afterCreate:this._showTextHandle.bind(this)}),"Show text")),v("div",{class:this.classes($t,Ft)},v("div",null,"Latitude: ",e.y),v("div",null,"Longitude: ",e.x)),v("div",{class:this.classes(zt,h)},v("calcite-button",{title:"Clear",scale:"s",onclick:this.clear.bind(this)},"Clear"))),v("calcite-tab",{style:t?"":"display:none;"},v("div",{class:$t},v("calcite-button",{title:"Identify elevation",scale:"s",onclick:this.elevation.bind(this)},"Elevation"),v("calcite-select",{title:"Select elevation unit",scale:"s",afterCreate:this._unitChangeHandle.bind(this,"elevation")},this._createUnitOptions(c,d))),v("div",{class:$t},v("label",null,v("calcite-switch",{title:"Show text while measuring",switched:i,scale:"m",afterCreate:this._showTextHandle.bind(this)}),"Show text")),v("div",{class:this.classes($t,Ft)},"Elevation: ",e.z," ",d),v("div",{class:this.classes(zt,u)},v("calcite-button",{title:"Clear",scale:"s",onclick:this.clear.bind(this)},"Clear")))))}_createUnitOptions(e,t){const i=[];for(const a in e)i.push(v("calcite-option",{value:a,selected:a===t},e[a]));return i}_createMeasureResult(){const{state:e,units:{lengthUnit:t,areaUnit:i}}=this;switch(e.action){case"length":case"measuringLength":return v("div",{key:Gt++,class:this.classes($t,Ft)},v("span",null,"Length:")," ",e.length.toLocaleString()," ",t);case"area":case"measuringArea":return v("div",{key:Gt++,class:this.classes($t,Ft)},v("div",null,v("span",null,"Area:")," ",e.area.toLocaleString()," ",i),v("div",null,v("span",null,"Perimeter:")," ",e.length.toLocaleString()," ",t));default:return v("div",{key:Gt++,class:this.classes($t,Ft)},"Select a measure tool")}}};jt([u({aliasOf:"viewModel.view"})],Bt.prototype,"view",2),jt([u({aliasOf:"viewModel.showText"})],Bt.prototype,"showText",2),jt([u({aliasOf:"viewModel.color"})],Bt.prototype,"color",2),jt([u({aliasOf:"viewModel.fillColor"})],Bt.prototype,"fillColor",2),jt([u()],Bt.prototype,"viewModel",2),jt([u({aliasOf:"viewModel.state"})],Bt.prototype,"state",2),jt([u({aliasOf:"viewModel.units"})],Bt.prototype,"units",2),jt([u({aliasOf:"viewModel.hasGround"})],Bt.prototype,"hasGround",2),jt([K()],Bt.prototype,"clear",1),jt([K()],Bt.prototype,"length",1),jt([K()],Bt.prototype,"area",1),jt([K()],Bt.prototype,"elevation",1),jt([K()],Bt.prototype,"location",1),Bt=jt([w("cov.widgets.Measure")],Bt);var Wt=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,Yt=(e,t,i,a)=>{for(var o,n=a>1?void 0:a?Xt(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(n=(a?o(t,i,n):o(n))||n);return a&&n&&Wt(t,i,n),n};const Zt="cov-print",Qt="cov-print--result";let Jt=0,Kt=class extends g{constructor(e){super(e),this.title="Map Print",this.printer=new ee,this._titleInput=v("calcite-input",{scale:"s",type:"text",placeholder:"Title"}),this._results=new U;const{printer:t}=this;t.load().then(this._renderSelects.bind(this)).catch()}_print(){const{title:e,printer:t,_titleInput:i,_layoutSelect:a,_formatSelect:o,_results:n}=this,s=i.domNode.value||e,l=o.domNode.selectedOption.value,r=a.domNode.selectedOption.value,c={element:v("div",{key:Jt++,class:Qt},v("calcite-button",{scale:"s",round:"",appearance:"outline",loading:""},s))};n.add(c),t.print(new te({format:l,layout:r,layoutOptions:{titleText:s}})).then((e=>{c.element=v("div",{key:Jt++,class:Qt},v("calcite-button",{scale:"s",round:"",appearance:"outline","icon-start":"download",onclick:()=>{window.open(e.url,"_blank")}},s))})).catch((e=>{console.log(e),c.element=v("div",{key:Jt++,class:Qt},v("calcite-button",{scale:"s",round:"",color:"red",disabled:"",appearance:"outline","icon-start":"exclamation-mark-triangle"},s))})).then(this.scheduleRender.bind(this))}render(){const{_titleInput:e,_layoutSelect:t,_formatSelect:i,_results:a}=this;return v("div",{class:Zt},v("calcite-label",{scale:"s"},"Title",e),v("calcite-label",{scale:"s"},"Layout",t),v("calcite-label",{scale:"s"},"Format",i),v("calcite-button",{scale:"s",width:"full",onclick:this._print.bind(this)},"Print"),v("div",null,a.toArray().map((e=>e.element))))}_renderSelects(e){const{defaultTemplates:t,templatesInfo:{format:i,layout:a}}=e;this._layoutSelect=v("calcite-select",{scale:"s"},a.choiceList.map((e=>{const i=t.find((t=>t.layout===e));return v("calcite-option",{label:i.label,value:e,selected:a.defaultValue===e})}))),this._formatSelect=v("calcite-select",{scale:"s"},i.choiceList.map((e=>v("calcite-option",{label:e.toUpperCase(),value:e,selected:i.defaultValue===e}))))}};Yt([u({aliasOf:"printer.view"})],Kt.prototype,"view",2),Yt([u({aliasOf:"printer.printServiceUrl"})],Kt.prototype,"printServiceUrl",2),Yt([u()],Kt.prototype,"title",2),Yt([u()],Kt.prototype,"printer",2),Yt([u()],Kt.prototype,"_titleInput",2),Yt([u()],Kt.prototype,"_layoutSelect",2),Yt([u()],Kt.prototype,"_formatSelect",2),Yt([u()],Kt.prototype,"_results",2),Kt=Yt([w("cov.widgets.Print")],Kt),ie.portalUrl="https://gisportal.vernonia-or.gov/portal";const ei=new Me({title:"Vernonia Map"}),ti=new p,ii=new ve({portal:ti,oAuthInfo:new ae({portalUrl:ie.portalUrl,appId:"L8fvJsX7U6RlN1Pt",popup:!0})}),ai=()=>{const e=new oe({portalItem:{id:"eb0c7507611e44b7923dd1c0167e3b92"}}),t=new oe({portalItem:{id:"2f760ba990ab4d6e831d04b85a8a0bf3"},visible:!1}),i=new oe({portalItem:{id:"a6063eb199e640e0bbc2d5ceca23de9a"},popupTemplate:new Le}),a=new ne({searchAllEnabled:!1,includeDefaultSources:!1,sources:[new se({layer:i,outFields:["*"],searchFields:["ADDRESS"],suggestionTemplate:"{ADDRESS}",placeholder:"Tax lot by address",name:"Tax lot by address",zoomScale:3e3,filter:{where:"BNDY_CLIPPED = 0"}}),new se({layer:i,outFields:["*"],searchFields:["OWNER"],suggestionTemplate:"{OWNER}",placeholder:"Tax lot by owner",name:"Tax lot by owner",zoomScale:3e3,filter:{where:"BNDY_CLIPPED = 0"}}),new se({layer:i,outFields:["*"],searchFields:["ACCOUNT_IDS"],suggestionTemplate:"{ACCOUNT_IDS}",placeholder:"Tax lot by tax account",name:"Tax lot by tax account",zoomScale:3e3,filter:{where:"BNDY_CLIPPED = 0"}}),new se({layer:i,outFields:["*"],searchFields:["TAXLOT_ID"],suggestionTemplate:"{TAXLOT_ID}",placeholder:"Tax lot by map and lot",name:"Tax lot by map and lot",zoomScale:3e3,filter:{where:"BNDY_CLIPPED = 0"}})]}),o=new le({map:new re({basemap:new ce({portalItem:{id:"f36cd213cc934d2391f58f389fc9eaec"}}),layers:[i,t,e],ground:"world-elevation"}),zoom:15,center:[-123.18291178267039,45.8616094153766],constraints:{rotationEnabled:!1},popup:{dockEnabled:!0,dockOptions:{position:"bottom-left",breakpoint:!1}}});new lt({view:o,title:"Vernonia Map",searchViewModel:a,oAuthViewModel:ii,markupViewModel:new ft({view:o}),nextBasemap:new ce({baseLayers:[new de({style:"aerial",key:"Ao8BC5dsixV4B1uhNaUAK_ejjm6jtZ8G3oXQ5c5Q-WtmpORHOMklBvzqSIEXwdxe"}),new pe({portalItem:{id:"f9a5da71cd61480680e456f0a3d4e1ce"}})],thumbnailUrl:"https://gisportal.vernonia-or.gov/portal/sharing/rest/content/items/b6130a13beb74026b89960fbd424021f/info/thumbnail/thumbnail1579125721359.png?f=json"}),widgets:[{widget:new Mt({view:o}),icon:"layers",text:"Layers"},{widget:new Bt({view:o}),icon:"measure",text:"Measure"},{widget:new Kt({view:o,printServiceUrl:"https://gisportal.vernonia-or.gov/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}),icon:"print",text:"Print"}]}),o.when((()=>{ei.end()}))},oi=e=>{console.log(e);const t=document.createElement("div");t.innerHTML='\n    <h3 style="margin-left: 1rem;">Authorization Error</h3>\n    <p style="margin-left: 1rem;">Please reload page.</p>\n    <p style="margin-left: 1rem;">If error continues contact please application maintainer.</p>\n  ',document.body.append(t),ei.end()};ti.load().then((()=>{ii.load().then(ai).catch(oi)})).catch(oi);
