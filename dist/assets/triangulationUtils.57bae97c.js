import{r as n}from"./earcut.b5c0cad1.js";import{ia as t}from"./vendor.9770a310.js";import{n as e}from"./deduplicate.a6019262.js";function o(t){const o=r(t.rings,t.hasZ,1),l=[];let s=0,i=0;for(const e of o.polygons){const t=e.count,r=e.index,c=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*t),a=e.holeIndices.map((n=>n-r)),h=new Uint32Array(n(c,a,3));l.push({position:c,faces:h}),s+=c.length,i+=h.length}const c=function(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const c of n){for(let n=0;n<c.position.length;n++)o[l++]=c.position[n];for(let n=0;n<c.faces.length;n++)r[s++]=c.faces[n]+i;i=l/3}return{position:o,faces:r}}(l,s,i),a=e(c.position.buffer,6,{originalIndices:c.faces});return c.position=new Float64Array(a.buffer),c.faces=a.indices,c}function r(n,t,e){const o=n.length,r=new Array(o),i=new Array(o),c=new Array(o);let a=0,h=0,f=0,g=0;for(let l=0;l<o;++l)g+=n[l].length;const u=new Float64Array(3*g);let p=0;for(let d=o-1;d>=0;d--){const g=n[d],y=1===e&&s(g);if(y&&1!==o)r[a++]=g;else{let n=g.length;for(let t=0;t<a;++t)n+=r[t].length;const e={index:p,pathLengths:new Array(a+1),count:n,holeIndices:new Array(a)};e.pathLengths[0]=g.length,g.length>0&&(c[f++]={index:p,count:g.length}),p=y?l(g,g.length-1,-1,u,p,g.length,t):l(g,0,1,u,p,g.length,t);for(let o=0;o<a;++o){const n=r[o];e.holeIndices[o]=p,e.pathLengths[o+1]=n.length,n.length>0&&(c[f++]={index:p,count:n.length}),p=l(n,0,1,u,p,n.length,t)}a=0,e.count>0&&(i[h++]=e)}}for(let s=0;s<a;++s){const n=r[s];n.length>0&&(c[f++]={index:p,count:n.length}),p=l(n,0,1,u,p,n.length,t)}return h<o&&(i.length=h),f<o&&(c.length=f),{position:u,polygons:i,outlines:c}}function l(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}function s(n){return!t(n,!1,!1)}export{r as l,o};
