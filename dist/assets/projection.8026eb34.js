import{an as r,f5 as e,mR as t,mS as o,mT as n,mU as a,fI as f,kV as y,jZ as s,g6 as c,l9 as m,g7 as u,mV as i,fA as T,bU as p,f$ as A,gv as d,be as l,kT as E,mW as g}from"./vendor.c9efa5f2.js";import{e as P,f as C,o as F}from"./vec33.e99e2659.js";const V=r.getLogger("esri.geometry.support.meshUtils.normalProjection");function _(r,e,t,o,n){return Y(o)?(N(0,f.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n)),n):(V.error("Cannot convert spatial reference to PCPF"),n)}function h(r,e,t,o,n){return Y(o)?(N(1,f.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n)),n):(V.error("Cannot convert to spatial reference from PCPF"),n)}function v(r,o,n){return e(r,o,0,n,t(o),0,r.length/3),n}function M(r,o,n){return e(r,t(n),0,o,n,0,r.length/3),o}function S(r,e,t){if(l(r))return e;const o=y.fromTypedArray(r),n=y.fromTypedArray(e);return P(n,o,t),e}function L(r,e,t){if(l(r))return e;E(x,t);const o=f.fromTypedArray(r),n=f.fromTypedArray(e);return C(n,o,x),g(x)||F(n,n),e}function R(r,e,t){if(l(r))return e;E(x,t);const o=f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),n=f.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(C(n,o,x),g(x)||F(n,n),r!==e)for(let a=3;a<r.length;a+=4)e[a]=r[a];return e}function j(r,e,t,o,n){if(!Y(o))return V.error("Cannot convert spatial reference to PCPF"),n;N(0,f.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let a=3;a<r.length;a+=4)n[a]=r[a];return n}function B(r,e,t,o,n){if(!Y(o))return V.error("Cannot convert to spatial reference from PCPF"),n;N(1,f.fromTypedArray(r,16),y.fromTypedArray(e),y.fromTypedArray(t),o,f.fromTypedArray(n,16));for(let a=3;a<r.length;a+=4)n[a]=r[a];return n}function N(r,e,o,n,a,f){if(!e)return;const y=o.count,p=t(a);if(b(a))for(let t=0;t<y;t++)n.getVec(t,U),e.getVec(t,W),s(p,U,k,p),c(x,k),1===r&&m(x,x),u(W,W,x),f.setVec(t,W);else for(let t=0;t<y;t++){n.getVec(t,U),e.getVec(t,W),s(p,U,k,p),c(x,k);const a=i(o.get(t,1));let y=Math.cos(a);0===r&&(y=1/y),x[0]*=y,x[1]*=y,x[2]*=y,x[3]*=y,x[4]*=y,x[5]*=y,1===r&&m(x,x),u(W,W,x),T(W,W),f.setVec(t,W)}return f}function Y(r){return b(r)||function(r){return r.isWebMercator}(r)}function b(r){return r.isWGS84||o(r)||n(r)||a(r)}const U=p(),W=p(),k=A(),x=d();export{j as B,_ as F,R as L,M,B as R,S as V,h as _,L as k,v};
